<div class="questions_container">
  {#foreach $T.questions as question}
    <div id="q_view_{$T.question$index}" class="card questions_cards card_with_options">
      <h4>
        {#if $T.question$index > 0}
          <a href="javascript:question_move_up({$T.question$index});">^</a>
        {#/if}
        Question {$T.question$index + 1}:{$T.question.question} <br>
        Question parameters: ({$T.question.choice_type}, select between {$T.question.min} and
        {#if $T.question.max != null}{$T.question.max}{#else}unlimited{#/if} 
        choices, result type {$T.question.result_type}{#if $T.question.randomize_answer_order}, random choice Order{#/if}.)
    
      </h4>
      <div class="question_options_div">
        <h4>Question choices:</h4>
        <ul>
          {#foreach $T.question.answers as answer}
            <li> 
              {$T.answer}
              {#if $T.question.answer_urls[$T.answer$index}
                <a target="_new" href="{$T.question.answer_urls[$T.answer$index]}">more</a>
              {#/if}
            </li>
          {#/for}
        </ul> 
      </div>
      <div class="action_div">
        {#if $T.admin_p}
          
          <a class="button_class" onclick="return confirm('Are you sure you want to remove this question?');" href="javascript:question_remove({$T.question$index})">Delete</a> 
          <a class="button_class" href="javascript:question_edit({$T.question$index})">Edit</a>
        {#/if}
      </div>
    </div>

    <div id="q_edit_{$T.question$index}" style="display:none;" >
      <form id="question_edit_{$T.question$index}_form" onsubmit="question_update({$T.question$index}, this); return false;" action="#">
        <p>
        <!--
          Type of Question:
          <select name="choice_type">
            <option selected>approval</option>
          </select>
        -->
        <input type="hidden" name="choice_type" value="approval" />
        <b>{$T.question$index + 1}.</b> &nbsp;&nbsp;&nbsp;Select between &nbsp;&nbsp;
        <select class="select_numbers" name="min">
            <option selected>0</option>
        {#for option_index = 1 to 20}
            <option>{$T.option_index}</option>
        {#/for}
        </select>

        (min) and

        <select class="select_numbers" name="max">
            <option>0</option>
            <option selected>1</option>
        {#for option_index = 2 to 50}
            <option>{$T.option_index}</option>
        {#/for}
            <option value="">- (approval)</option>
        </select>

        (max) 
        choices.

        &nbsp;&nbsp;
        &nbsp;&nbsp;
        Result Type:&nbsp;
        <select name="result_type">
            <option selected>absolute</option>
            <option>relative</option>
        </select>

        &nbsp;&nbsp;
        &nbsp;&nbsp;
        Random Choice Order:&nbsp;
        <select name="randomize_answer_order">
          <option selected value="0">no</option>
          <option value="1">yes</option>
        </select>
        </p>

        <table id="answer_table_{$T.question$index}" class="answer_table">
          <tbody>
            <tr><th>Question:</th><td><input type="text" name="question" size="70" /></td></tr>
          </tbody>
          <tfoot class="footer_action">
            <tr class="td_action"><th><a class="button_class small_button" href="javascript:add_answers($('#answer_table_{$T.question$index}'),1)">Add 1 more choice</a></th></tr>
            
            <tr class="td_action">
                <td class="td_action">
                  <div class="action_div">
                    <input class="button_class" type="submit" value="update question" /> 
                    <input class="button_class" type="reset" value="cancel" onclick="question_edit_cancel({$T.question$index});" />
                  </div>
                </td>
            </tr>
            </div>
          </tfoot>

        </table>
      </form>
    </div>
    {#else}
    no questions yet
  {#/for}
</div>


<div class="Add_question card" id="question_form">
  {#if $T.admin_p}
    <h4>Add a Question:</h4>
    <form id="question_form" onsubmit="question_add(this); return false;" action="#">
      <p>
      
        <input type="hidden" name="choice_type" value="approval" />
        Select between &nbsp;&nbsp;
        <select name="min" class="select_numbers">
          <option selected>0</option>
          {#for option_index = 1 to 20}
            <option>{$T.option_index}</option>
          {#/for}
        </select>

        &nbsp;(min) and

        <select name="max" class="select_numbers">
          <option>0</option>
          <option selected>1</option>
          {#for option_index = 2 to 50}
            <option>{$T.option_index}</option>
          {#/for}
          <option value="">- (approval)</option>
        </select>

        (max) choices.
        <br>

        Result Type:
        <select name="result_type">
          <option selected>absolute</option>
          <option>relative</option>
        </select>
        
        &nbsp;&nbsp;
        Random Choice Order:&nbsp;
        <select name="randomize_answer_order">
          <option selected value="0">no</option>
          <option value="1">yes</option>
        </select>
        <br>
      </p>

      <table id="answer_table" style="width:100%;">
        <tbody>
          <tr><th>Question:</th><td><input type="text" name="question" size="70" /></td></tr>
        </tbody>

      </table>
      <div class="action_div">
        <a class="button_class" href="javascript:add_answers($('#answer_table'), 1)">Add 1 more choice</a>
        <input class="button_class" type="submit" value="Add question" />
      </div>
      
    </form>
  {#/if}
</div>